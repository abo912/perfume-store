<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة الأدمن</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        header { margin-bottom: 20px; }
        .admin-section { max-width: 600px; margin: auto; }
        input, select, button { display: block; width: 100%; margin: 10px 0; padding: 8px; }
        #adminProducts { margin-top: 20px; }
        .product-item { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; display: flex; align-items: center; }
        .product-item img { width: 100px; margin-right: 10px; }
    </style>
</head>
<body>
    <script>
        let password = prompt("ادخل كلمة المرور للدخول إلى الأدمن:");
        if(password !== "1234"){
            alert("كلمة المرور خاطئة!");
            window.location.href = "index.html";
        }
    </script>

    <header>
        <h1>لوحة التحكم - الأدمن</h1>
        <nav>
            <a href="index.html">الرئيسية</a>
        </nav>
    </header>

    <section class="admin-section">
        <h2>إضافة منتج جديد</h2>
        <form id="addProductForm">
            <input type="text" id="productName" placeholder="اسم المنتج" required>
            <input type="text" id="productDesc" placeholder="وصف المنتج" required>
            <input type="text" id="productPrice" placeholder="سعر المنتج" required>
            <input type="number" id="productQty" placeholder="كمية المنتج" required min="1">
            
            <label>اختر صورة المنتج:</label>
            <select id="productImageSelect" required>
                <option value="">اختر صورة</option>
                <option value="images/oud.jpg">عود ملكي</option>
                <option value="images/rose.jpg">وردة</option>
                <option value="images/musk.jpg">مسك</option>
            </select>

            <img id="preview" src="" alt="معاينة الصورة" style="width:150px; margin-top:10px;">
            <button type="submit">إضافة المنتج</button>
        </form>

        <h2>المنتجات الحالية</h2>
        <div id="adminProducts"></div>
    </section>

    <script>
        const addProductForm = document.getElementById("addProductForm");
        const productName = document.getElementById("productName");
        const productDesc = document.getElementById("productDesc");
        const productPrice = document.getElementById("productPrice");
        const productQty = document.getElementById("productQty");
        const productImageSelect = document.getElementById("productImageSelect");
        const preview = document.getElementById("preview");
        const adminProducts = document.getElementById("adminProducts");

        // عرض معاينة الصورة عند اختيارها
        productImageSelect.addEventListener("change", () => {
            preview.src = productImageSelect.value || "";
        });

        // تخزين المنتجات في LocalStorage مؤقتاً
        let products = JSON.parse(localStorage.getItem("products")) || [];

        function displayProducts() {
            adminProducts.innerHTML = "";
            products.forEach((prod, index) => {
                const div = document.createElement("div");
                div.className = "product-item";
                div.innerHTML = `
                    <img src="${prod.image}" alt="${prod.name}">
                    <div>
                        <h3>${prod.name}</h3>
                        <p>${prod.desc}</p>
                        <p>السعر: ${prod.price}</p>
                        <p>الكمية: ${prod.qty}</p>
                        <button onclick="deleteProduct(${index})">حذف</button>
                    </div>
                `;
                adminProducts.appendChild(div);
            });
        }

        function deleteProduct(index) {
            products.splice(index, 1);
            localStorage.setItem("products", JSON.stringify(products));
            displayProducts();
        }

        addProductForm.addEventListener("submit", (e) => {
            e.preventDefault();
            const newProduct = {
                name: productName.value,
                desc: productDesc.value,
                price: productPrice.value,
                qty: productQty.value,
                image: productImageSelect.value
            };
            products.push(newProduct);
            localStorage.setItem("products", JSON.stringify(products));
            displayProducts();
            addProductForm.reset();
            preview.src = "";
        });

        // عرض المنتجات عند فتح الصفحة
        displayProducts();
    </script>
</body>
</html>
